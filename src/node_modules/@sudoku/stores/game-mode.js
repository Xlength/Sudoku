import { writable } from 'svelte/store';

/**
 * 游戏模式存储
 * - 'cheat': 作弊版，可以使用Next Step
 * - 'solve': 求解版，只能使用提示（5次限制）
 */
function createGameMode() {
	const gameMode = writable(null);

	return {
		subscribe: gameMode.subscribe,

		set(mode) {
			if (mode === 'cheat' || mode === 'solve') {
				gameMode.set(mode);
			}
		},

		reset() {
			gameMode.set(null);
		},

		isCheatMode() {
			return gameMode && $gameMode === 'cheat';
		},

		isSolveMode() {
			return gameMode && $gameMode === 'solve';
		},
	};
}

export const gameMode = createGameMode();
